import{s as ee,e as I,c as j,b as P,m as q,f as x,o as y,i as K,h as v,n as R,D as te,F as C,a as L,t as ie,l as oe,g as H,d as ce,z as de,H as W,j as ve,J as ue,k as fe}from"../chunks/scheduler.48785eb3.js";import{S as se,i as ne,c as U,a as k,m as z,t as F,b as Z,d as B}from"../chunks/index.214faea7.js";import{p as me}from"../chunks/stores.83f3ffcd.js";function he(r){let l,s,f='<div class="emogi svelte-6xd3vs">ğŸ‘¾</div> <div class="emogi svelte-6xd3vs">ğŸ’</div> <div class="emogi svelte-6xd3vs">ğŸ’°</div> <div class="emogi svelte-6xd3vs">ğŸ’</div> <div class="emogi svelte-6xd3vs">ğŸŠ</div> <div class="emogi svelte-6xd3vs">ğŸ‹</div> <div class="emogi svelte-6xd3vs">ğŸ‰</div> <div class="emogi svelte-6xd3vs">ğŸŒ</div> <div class="emogi svelte-6xd3vs">ğŸ†</div>';return{c(){l=I("div"),s=I("div"),s.innerHTML=f,this.h()},l(o){l=j(o,"DIV",{class:!0});var e=P(l);s=j(e,"DIV",{class:!0,"data-svelte-h":!0}),q(s)!=="svelte-1iz3z07"&&(s.innerHTML=f),e.forEach(x),this.h()},h(){y(s,"class","reel svelte-6xd3vs"),y(l,"class","container svelte-6xd3vs")},m(o,e){K(o,l,e),v(l,s),r[3](s)},p:R,i:R,o:R,d(o){o&&x(l),r[3](null)}}}function pe(r,l,s){let{spinOffset:f=0}=l,o=4e3+f*1e3,e;te(()=>{m()});const m=()=>{let t=e.querySelectorAll("div"),a=360/t.length,_=Math.round(t[0].offsetHeight/2/Math.tan(Math.PI/t.length));t.forEach((c,D)=>{let d=a*D;c.style.transform=`rotateX(${d}deg) translateZ(${_}px)`})},h=()=>{let t=e.querySelectorAll("div"),a=360/t.length,_=Math.round(t[0].offsetHeight/2/Math.tan(Math.PI/t.length)),c=M(0,t.length-1),d=5+f;return new Promise((E,n)=>{s(0,e.style.transition=`all ${o}ms cubic-bezier(.41,-0.01,.63,1.09)`,e);let b=d*360+c*a;s(0,e.style.transform=`translateZ(${-_}px) rotateX(${-b}deg)`,e),setTimeout(()=>{s(0,e.style.transition="none",e),b=b%360,s(0,e.style.transform=`translateZ(${-_}px) rotateX(${-b}deg)`,e),E(c)},o)})},M=(t,a)=>Math.floor(Math.random()*(a-t+1)+t);function p(t){C[t?"unshift":"push"](()=>{e=t,s(0,e)})}return r.$$set=t=>{"spinOffset"in t&&s(1,f=t.spinOffset)},[e,f,h,p]}class J extends se{constructor(l){super(),ne(this,l,pe,he,ee,{spinOffset:1,roll:2})}get roll(){return this.$$.ctx[2]}}function _e(r){let l,s="",f,o,e,m,h,M,p,t,a,_,c,D,d,E,n,b,u,S='<div class="arm svelte-10jypn0"></div> <div class="ball svelte-10jypn0"></div>',O,T,G='<div class="instructions svelte-10jypn0">Type !slots to spin the wheel</div>',V,X,Q,le={};a=new J({props:le}),r[6](a);let re={spinOffset:1};c=new J({props:re}),r[7](c);let ae={spinOffset:2};return d=new J({props:ae}),r[8](d),{c(){l=I("script"),l.innerHTML=s,o=L(),e=I("div"),m=I("div"),h=I("div"),M=ie(r[4]),p=L(),t=I("div"),U(a.$$.fragment),_=L(),U(c.$$.fragment),D=L(),U(d.$$.fragment),E=L(),n=I("div"),b=L(),u=I("div"),u.innerHTML=S,O=L(),T=I("div"),T.innerHTML=G,this.h()},l(i){const w=oe("svelte-1nbh741",document.head);l=j(w,"SCRIPT",{src:!0,"data-svelte-h":!0}),q(l)!=="svelte-i7ndq0"&&(l.innerHTML=s),w.forEach(x),o=H(i),e=j(i,"DIV",{class:!0});var g=P(e);m=j(g,"DIV",{class:!0});var A=P(m);h=j(A,"DIV",{class:!0});var N=P(h);M=ce(N,r[4]),N.forEach(x),A.forEach(x),p=H(g),t=j(g,"DIV",{class:!0});var $=P(t);k(a.$$.fragment,$),_=H($),k(c.$$.fragment,$),D=H($),k(d.$$.fragment,$),$.forEach(x),E=H(g),n=j(g,"DIV",{class:!0}),P(n).forEach(x),b=H(g),u=j(g,"DIV",{class:!0,role:!0,tabindex:!0,"data-svelte-h":!0}),q(u)!=="svelte-1chcmit"&&(u.innerHTML=S),O=H(g),T=j(g,"DIV",{class:!0,"data-svelte-h":!0}),q(T)!=="svelte-1ugn8wi"&&(T.innerHTML=G),g.forEach(x),this.h()},h(){de(l.src,f="/tarot/tmi.min.js")||y(l,"src",f),y(h,"class","name svelte-10jypn0"),y(m,"class","semi-circle svelte-10jypn0"),y(t,"class","slots svelte-10jypn0"),y(n,"class","mount svelte-10jypn0"),y(u,"class","lever svelte-10jypn0"),y(u,"role","button"),y(u,"tabindex","0"),y(T,"class","console svelte-10jypn0"),y(e,"class","container svelte-10jypn0")},m(i,w){v(document.head,l),K(i,o,w),K(i,e,w),v(e,m),v(m,h),v(h,M),v(e,p),v(e,t),z(a,t,null),v(t,_),z(c,t,null),v(t,D),z(d,t,null),v(e,E),v(e,n),v(e,b),v(e,u),r[9](u),v(e,O),v(e,T),V=!0,X||(Q=[W(u,"click",r[5]),W(u,"keypress",r[5])],X=!0)},p(i,[w]){(!V||w&16)&&ve(M,i[4]);const g={};a.$set(g);const A={};c.$set(A);const N={};d.$set(N)},i(i){V||(F(a.$$.fragment,i),F(c.$$.fragment,i),F(d.$$.fragment,i),V=!0)},o(i){Z(a.$$.fragment,i),Z(c.$$.fragment,i),Z(d.$$.fragment,i),V=!1},d(i){i&&(x(o),x(e)),x(l),r[6](null),B(a),r[7](null),B(c),r[8](null),B(d),r[9](null),X=!1,ue(Q)}}}const Y="hello-world";function ge(r,l,s){let f;fe(r,me,n=>s(11,f=n));let o,e,m,h,M,p=[],t=Y;te(async()=>{o=f.url.searchParams.get("username"),a()});const a=()=>{const n=new window.tmi.Client({channels:[o]});n.connect(),n.on("message",(b,u,S,O)=>{let T=u["display-name"];console.log(`${T}: ${S}`),S=="!slots"&&(p.length==0?(p.push(T),_()):p.push(T))})},_=async()=>{const n=[{transform:"rotateX(0)"},{transform:"rotateX(180deg)"},{transform:"rotateX(0)"}],b={duration:2e3,easing:"ease-out"};M.animate(n,b),s(4,t=p[0]),t==null&&s(4,t=Y),await Promise.all([e.roll(),m.roll(),h.roll()]),p.shift(),p.length>0&&_()};function c(n){C[n?"unshift":"push"](()=>{e=n,s(0,e)})}function D(n){C[n?"unshift":"push"](()=>{m=n,s(1,m)})}function d(n){C[n?"unshift":"push"](()=>{h=n,s(2,h)})}function E(n){C[n?"unshift":"push"](()=>{M=n,s(3,M)})}return[e,m,h,M,t,_,c,D,d,E]}class Te extends se{constructor(l){super(),ne(this,l,ge,_e,ee,{})}}export{Te as component};
